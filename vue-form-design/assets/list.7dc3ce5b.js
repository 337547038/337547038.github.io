var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;import{a as c}from"./index.0a3ecb31.js";import{O as i,Y as n,K as f,j as b,t as d,E as u,r as p,o as m,v as h,a as y,w as D,h as k,s as q}from"./vendor.e07f640d.js";import{f as j,b as v,h as w}from"./index.cff14e94.js";import{s as C}from"./index.6c162138.js";const O={name:"list",props:{},components:{tableList:c},setup(){const e=i(),c=n(),p=e.query.formId,m=e.query.formName,h=f(),y=b({loading:!1,tableData:{config:{},columns:[]},searchData:{},requestUrl:j});return p&&v(p).then((e=>{if(200===e.data.code){const t=e.data.data[0];if(!t.tableData)return void u.info("请先设置表格列数据");y.tableData=C(t.tableData),t.searchData&&(y.searchData=C(t.searchData))}})),D=((e,t)=>{for(var a in t||(t={}))s.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&l(e,a,t[a]);return e})({},d(y)),t(D,a({beforeRequest:e=>e,onSubmit:()=>{h.value.searchClick()},tableListEl:h,btnClick:(e,t)=>{switch(t){case"show":c.push({path:"/form",query:{formName:m,formId:p,id:e,type:2}});break;case"edit":c.push({path:"/form",query:{formName:m,formId:p,id:e}});break;case"del":w(m,e).then((e=>{200===e.data.code?(u.success("删除成功"),h.value.getListData()):u.error("删除失败")})).catch((e=>{u.error("删除失败")}))}}}));var D}},g={class:"form-list-page"},x=k("h3",null,"列表数据",-1),_=q("查看"),P=q("编辑"),E=q("删除"),I=k("p",{style:{"padding-top":"20px",color:"#999"}},"注：此示例接口不支持搜索分页查询",-1);O.render=function(e,t,a,r,s,o){const l=p("el-button"),c=p("table-list");return m(),h("div",g,[x,y(c,{ref:"tableListEl",searchData:e.searchData,tableData:e.tableData,requestUrl:e.requestUrl,beforeRequest:r.beforeRequest},{__control:D((e=>[y(l,{type:"text",onClick:t=>r.btnClick(e.row.id,"show")},{default:D((()=>[_])),_:2},1032,["onClick"]),y(l,{type:"text",onClick:t=>r.btnClick(e.row.id,"edit")},{default:D((()=>[P])),_:2},1032,["onClick"]),y(l,{type:"text",onClick:t=>r.btnClick(e.row.id,"del")},{default:D((()=>[E])),_:2},1032,["onClick"])])),_:1},8,["searchData","tableData","requestUrl","beforeRequest"]),I])};export{O as default};
