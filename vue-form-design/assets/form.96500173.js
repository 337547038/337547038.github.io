var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t;import{_ as c}from"./index.00aab0cf.js";import{K as d,M as i,h as l,t as m,E as p,r as f,N as u,B as b,v as y,a as g,w as v,u as O,o as h,q as j}from"./vendor.b251bce2.js";import{b as w,c as D,d as N,e as q}from"./index.4462bcd9.js";const P={name:"add",props:{},components:{designForm:c},setup(e){const c=d(),f=i(),u=f.query.formName,b=f.query.id,y=f.query.formId,g=f.query.type||1,v=l({loading:!1,formData:{},type:parseInt(g)});y&&(v.loading=!0,w(y).then((e=>{200===e.data.code&&(v.formData=JSON.parse(e.data.data[0].formData)),v.loading=!1})).catch((e=>{throw v.loading=!1,new Error("获取表单设计数据失败")}))),b&&D(b,u).then((e=>{if(200===e.data.code){const a=e.data.data[0];j(a,0),c.value.setValue(a)}}));const O=e=>{j(e,1),N(e,u).then((e=>{200===e.data.code?p({message:"保存成功！",type:"success"}):p.error(e.data.message)}))},h=e=>{j(e,1),q(e,u,b).then((e=>{200===e.data.code?p({message:"修改成功！",type:"success"}):p.error(e.data.message)}))},j=(e,a)=>{console.log(e),["cascader","checkbox","tableList"].forEach((r=>{0===a?e[r]&&(e[r]=JSON.parse(e[r])):1===a&&(e[r]=JSON.stringify(e[r]))}))};return P=((e,a)=>{for(var r in a||(a={}))o.call(a,r)&&n(e,r,a[r]);if(t)for(var r of t(a))s.call(a,r)&&n(e,r,a[r]);return e})({},m(v)),a(P,r({submit:()=>{const e=c.value.getValue();c.value.validate((a=>{if(!a)return console.log("error submit"),!1;b?h(e):O(e)}))},formName:c}));var P}},x={class:"add-form-demo"},E=O("h3",null,"新增/编辑/查看数据",-1),S=j("提交");P.render=function(e,a,r,t,o,s){const n=f("design-form"),c=f("el-button"),d=u("loading");return b((h(),y("div",x,[E,g(n,{formData:e.formData,ref:"formName",type:e.type},null,8,["formData","type"]),g(c,{type:"primary",onClick:t.submit},{default:v((()=>[S])),_:1},8,["onClick"])],512)),[[d,e.loading]])};export{P as default};
