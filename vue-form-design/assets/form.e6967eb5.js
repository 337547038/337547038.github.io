var w=Object.defineProperty,V=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var g=(t,o,a)=>o in t?w(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,_=(t,o)=>{for(var a in o||(o={}))C.call(o,a)&&g(t,a,o[a]);if(u)for(var a of u(o))I.call(o,a)&&g(t,a,o[a]);return t},h=(t,o)=>V(t,k(o));import{_ as S,d as q}from"./index.04a1649d.js";import{i as x,S as B,n as E,p as F,r as y,U as R,I as O,o as $,x as J,a as v,w as T,C as d,h as L,s as M}from"./vendor.f9fdd043.js";import{b as U,c as z,d as A,e as G}from"./index.9fa736e5.js";import{s as H}from"./index.6c162138.js";const K={name:"add",props:{},components:{designForm:q},setup(t){const o=x(),a=B(),n=a.query.formName,c=a.query.id,f=a.query.formId,l=a.query.type||1,r=E({loading:!1,formData:{},type:parseInt(l)});f&&(r.loading=!0,U(f).then(e=>{e.data.code===200&&(r.formData=H(e.data.data[0].formData)),r.loading=!1}).catch(e=>{throw r.loading=!1,new Error("\u83B7\u53D6\u8868\u5355\u8BBE\u8BA1\u6570\u636E\u5931\u8D25")})),c&&z(c,n).then(e=>{if(e.data.code===200){const s=e.data.data[0];p(s,0),o.value.setValue(s)}});const m=()=>{const e=o.value.getValue();o.value.validate(s=>{if(s)c?N(e):D(e);else return console.log("error submit"),!1})},D=e=>{p(e,1),A(e,n).then(s=>{s.data.code===200?d({message:"\u4FDD\u5B58\u6210\u529F\uFF01",type:"success"}):d.error(s.data.message)})},N=e=>{p(e,1),G(e,n,c).then(s=>{s.data.code===200?d({message:"\u4FEE\u6539\u6210\u529F\uFF01",type:"success"}):d.error(s.data.message)})},p=(e,s)=>{const b=["cascader","checkbox","tableList"];console.log(e),b.forEach(i=>{s===0?e[i]&&(e[i]=JSON.parse(e[i])):s===1&&(e[i]=JSON.stringify(e[i]))})};return h(_({},F(r)),{submit:m,formName:o})}},P={class:"add-form-demo"},Q=L("h3",null,"\u65B0\u589E/\u7F16\u8F91/\u67E5\u770B\u6570\u636E",-1),W=M("\u63D0\u4EA4");function X(t,o,a,n,c,f){const l=y("design-form"),r=y("el-button"),m=R("loading");return O(($(),J("div",P,[Q,v(l,{formData:t.formData,ref:"formName",type:t.type},null,8,["formData","type"]),v(r,{type:"primary",onClick:n.submit},{default:T(()=>[W]),_:1},8,["onClick"])])),[[m,t.loading]])}var ae=S(K,[["render",X]]);export{ae as default};
