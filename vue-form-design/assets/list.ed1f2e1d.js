var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;import{a as c}from"./index.d6b97dae.js";import{M as i,Y as n,K as b,j as d,t as p,E as u,r as f,v as m,a as h,w as y,h as D,o as k,s as q}from"./vendor.6759e969.js";import{f as v,b as w,h as C}from"./index.9150e1e6.js";const O={name:"list",props:{},components:{tableList:c},setup(){const e=i(),c=n(),f=e.query.formId,m=e.query.formName,h=b(),y=d({loading:!1,tableData:{config:{},columns:[]},searchData:{},requestUrl:v});return f&&w(f).then((e=>{if(200===e.data.code){const a=e.data.data[0];if(!a.tableData)return void u.info("请先设置表格列数据");y.tableData=JSON.parse(a.tableData),a.searchData&&(y.searchData=JSON.parse(a.searchData))}})),D=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&l(e,t,a[t]);if(r)for(var t of r(a))o.call(a,t)&&l(e,t,a[t]);return e})({},p(y)),a(D,t({beforeRequest:e=>e,onSubmit:()=>{h.value.searchClick()},tableListEl:h,btnClick:(e,a)=>{switch(a){case"show":c.push({path:"/form",query:{formName:m,formId:f,id:e,type:2}});break;case"edit":c.push({path:"/form",query:{formName:m,formId:f,id:e}});break;case"del":C(m,e).then((e=>{200===e.data.code?(u.success("删除成功"),h.value.getListData()):u.error("删除失败")})).catch((e=>{u.error("删除失败")}))}}}));var D}},j={class:"form-list-page"},g=D("h3",null,"列表数据",-1),x=q("查看"),_=q("编辑"),N=q("删除"),P=D("p",{style:{"padding-top":"20px",color:"#999"}},"注：此示例接口不支持搜索分页查询",-1);O.render=function(e,a,t,r,s,o){const l=f("el-button"),c=f("table-list");return k(),m("div",j,[g,h(c,{ref:"tableListEl",searchData:e.searchData,tableData:e.tableData,requestUrl:e.requestUrl,beforeRequest:r.beforeRequest},{__control:y((e=>[h(l,{type:"text",onClick:a=>r.btnClick(e.row.id,"show")},{default:y((()=>[x])),_:2},1032,["onClick"]),h(l,{type:"text",onClick:a=>r.btnClick(e.row.id,"edit")},{default:y((()=>[_])),_:2},1032,["onClick"]),h(l,{type:"text",onClick:a=>r.btnClick(e.row.id,"del")},{default:y((()=>[N])),_:2},1032,["onClick"])])),_:1},8,["searchData","tableData","requestUrl","beforeRequest"]),P])};export{O as default};
