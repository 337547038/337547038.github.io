var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;import{a as c}from"./index.bdf2c4cb.js";import{M as i,Y as n,K as b,h as f,t as u,E as d,r as p,v as m,a as h,w as y,u as D,o as k,q}from"./vendor.bb6fcdfb.js";import{f as v,b as w,h as C}from"./index.884f4285.js";const O={name:"list",props:{},components:{tableList:c},setup(){const e=i(),c=n(),p=e.query.formId,m=e.query.formName,h=b(),y=f({loading:!1,tableData:{config:{},columns:[]},searchData:{},requestUrl:v});return p&&w(p).then((e=>{if(200===e.data.code){const t=e.data.data[0];if(!t.tableData)return void d.info("请先设置表格列数据");y.tableData=JSON.parse(t.tableData),t.searchData&&(y.searchData=JSON.parse(t.searchData))}})),D=((e,t)=>{for(var a in t||(t={}))s.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&l(e,a,t[a]);return e})({},u(y)),t(D,a({beforeRequest:e=>e,onSubmit:()=>{h.value.searchClick()},tableListEl:h,btnClick:(e,t)=>{switch(t){case"show":c.push({path:"/form",query:{formName:m,formId:p,id:e,type:2}});break;case"edit":c.push({path:"/form",query:{formName:m,formId:p,id:e}});break;case"del":C(m,e).then((e=>{200===e.data.code?(d.success("删除成功"),h.value.getListData()):d.error("删除失败")})).catch((e=>{d.error("删除失败")}))}}}));var D}},j={class:"form-list-page"},g=D("h3",null,"列表数据",-1),x=q("查看"),_=q("编辑"),N=q("删除"),P=D("p",{style:{"padding-top":"20px",color:"#999"}},"注：此示例接口不支持搜索分页查询",-1);O.render=function(e,t,a,r,s,o){const l=p("el-button"),c=p("table-list");return k(),m("div",j,[g,h(c,{ref:"tableListEl",searchData:e.searchData,tableData:e.tableData,requestUrl:e.requestUrl,beforeRequest:r.beforeRequest},{__control:y((e=>[h(l,{type:"text",onClick:t=>r.btnClick(e.row.id,"show")},{default:y((()=>[x])),_:2},1032,["onClick"]),h(l,{type:"text",onClick:t=>r.btnClick(e.row.id,"edit")},{default:y((()=>[_])),_:2},1032,["onClick"]),h(l,{type:"text",onClick:t=>r.btnClick(e.row.id,"del")},{default:y((()=>[N])),_:2},1032,["onClick"])])),_:1},8,["searchData","tableData","requestUrl","beforeRequest"]),P])};export{O as default};
